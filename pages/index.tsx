import Head from "next/head";
import { useState } from "react";

import Display from "@/components/Display";
import WordBank from "@/components/WordBank";

import characters from "@/data/characters.json";
import Character from "@/data/characters";

const charSet = new Set<string>();
for (const char of characters as Character[]) {
    charSet.add(char.glyph);
    if (char.simplified) {
        charSet.add(char.simplified);
    }
    if (char.traditional) {
        charSet.add(char.traditional);
    }
}

export default function Home() {
    const [text, setText] = useState("東西南北\n夢不息");
    const addChar = (char: string) => {
        setText(text + char);
    };

    return (
        <>
            <Head>
                <title>wen</title>
                <meta
                    name="description"
                    content="Generated by create next app"
                />
                <meta
                    name="viewport"
                    content="width=device-width, initial-scale=1"
                />
                <link rel="icon" href="/favicon.ico" />
            </Head>
            <main>
                <div id="inputanddisplay">
                    <section id="input">
                        <h2>input</h2>
                        <p>
                            write chinese text here to see it displayed below in
                            my calligraphy, ransom note-style. try adding line
                            breaks too!
                        </p>
                        <textarea
                            value={text}
                            onChange={(e) => setText(e.target.value)}
                        />
                    </section>
                    <Display text={text} charSet={charSet} />
                </div>
                <WordBank characters={characters} addChar={addChar} />
            </main>
        </>
    );
}
